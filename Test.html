<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personal Portal (QR Unlock)</title>
<style>
  body {margin:0;font-family:Arial,sans-serif;background:#071025;color:#e6eef8;}
  #locked {position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(2,6,23,0.9);z-index:50;}
  #qr {width:200px;height:200px;background:#fff;border-radius:12px;padding:12px;margin:12px 0;}
  #portal {display:none;padding:20px;max-width:900px;margin:auto;}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
  header h1{margin:0;font-size:24px;}
  .section{background:#0b1220;padding:12px;border-radius:12px;margin-bottom:16px;}
  input, textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.02);color:#e6eef8;}
  button{padding:8px 12px;border-radius:8px;border:none;background:#60a5fa;color:#000;cursor:pointer;margin-top:8px;}
  .bookmark-list{margin-top:8px;display:flex;flex-wrap:wrap;gap:8px;}
  .bookmark-item{background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:8px;text-decoration:none;color:#e6eef8;}
</style>
</head>
<body>

<div id="locked">
  <h1>Scan QR Code to Unlock Portal</h1>
  <p>Use your phone to scan and unlock.</p>
  <img id="qr" src="" alt="QR Code">
  <p>Waiting for phone confirmation...</p>
</div>

<div id="portal">
  <header>
    <h1>My Personal Portal</h1>
  </header>

  <div class="section">
    <h3>Quick Add Bookmark</h3>
    <input type="text" id="bmTitle" placeholder="Title">
    <input type="text" id="bmURL" placeholder="URL">
    <button id="addBM">Add Bookmark</button>
    <div class="bookmark-list" id="bookmarkList"></div>
  </div>

  <div class="section">
    <h3>Notes</h3>
    <textarea id="notes" rows="6" placeholder="Your notes here..."></textarea>
  </div>
</div>

<script>
// QR Unlock
const SECRET_TOKEN = 'SECRET12345';
const WEBHOOK_URL = 'https://webhook.site/9124df72-219e-45e5-8a3e-b9548a3f8bec';
const PHONE_UNLOCK_URL = WEBHOOK_URL + '?unlock=' + SECRET_TOKEN;
document.getElementById('qr').src = 'https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + encodeURIComponent(PHONE_UNLOCK_URL);

async function checkUnlock() {
    try {
        const res = await fetch(WEBHOOK_URL);
        const text = await res.text();
        if(text.includes('unlock=' + SECRET_TOKEN)){
            document.getElementById('locked').style.display = 'none';
            document.getElementById('portal').style.display = 'block';
            return;
        }
    } catch(e){}
    setTimeout(checkUnlock,1500);
}
checkUnlock();

// Bookmarks
let bookmarks = JSON.parse(localStorage.getItem('bookmarks')||'[]');
const bmList = document.getElementById('bookmarkList');

function renderBookmarks() {
    bmList.innerHTML = '';
    bookmarks.forEach(bm => {
        const a = document.createElement('a');
        a.href = bm.url;
        a.target='_blank';
        a.className='bookmark-item';
        a.textContent = bm.title;
        bmList.appendChild(a);
    });
}

document.getElementById('addBM').addEventListener('click',()=>{
    const title = document.getElementById('bmTitle').value.trim();
    const url = document.getElementById('bmURL').value.trim();
    if(!title || !url) return alert('Enter title and URL');
    bookmarks.push({title,url});
    localStorage.setItem('bookmarks',JSON.stringify(bookmarks));
    renderBookmarks();
    document.getElementById('bmTitle').value='';
    document.getElementById('bmURL').value='';
});

renderBookmarks();

// Notes
const notesEl = document.getElementById('notes');
notesEl.value = localStorage.getItem('notes')||'';
notesEl.addEventListener('input',()=>{localStorage.setItem('notes',notesEl.value);});
</script>

</body>
</html>
